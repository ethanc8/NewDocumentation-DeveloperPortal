<!doctype html>
<html class="no-js" lang="en" data-content_root="">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" /><link rel="next" title="Integrating with GNOME" href="integrating.html" /><link rel="prev" title="API Stability" href="api-stability.html" />

    <!-- Generated with Sphinx 7.1.2 and Furo 2024.05.06 -->
        <title>Parallel Installability - GNUstep Developer Portal</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?v=387cc868" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" /
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">GNUstep Developer Portal</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../index.html">
  
  
  <span class="sidebar-brand-text">GNUstep Developer Portal</span>
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../introduction.html">Platform Introduction</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Platform Introduction</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../introduction/components.html">Platform Components</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Platform Components</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../introduction/overview/libraries.html">Libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../introduction/overview/services.html">Services</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../introduction/languages.html">Programming Languages</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../../guidelines.html">Guidelines</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Guidelines</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="../programming.html">Programming Guidelines</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Programming Guidelines</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../programming/coding-style.html">C Coding Style</a></li>
<li class="toctree-l3"><a class="reference internal" href="../programming/memory-management.html">Managing Memory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../programming/writing-good-code.html">The Importance of Writing Good Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../programming/optimizing.html">Optimizing GNOME Applications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../programming/namespacing.html">Namespacing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../programming/introspection.html">Introspection</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../accessibility.html">Accessibility</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Accessibility</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../accessibility/coding-guidelines.html">Coding Guidelines for Supporting Accessibility</a></li>
<li class="toctree-l3"><a class="reference internal" href="../accessibility/custom-widgets.html">Making Custom Components Accessible</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../localization.html">Localization</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Localization</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../localization/practices.html">Best Practices for Localization</a></li>
</ul>
</li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="../maintainer.html">Maintainer Guidelines</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of Maintainer Guidelines</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="api-stability.html">API Stability</a></li>
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">Parallel Installability</a></li>
<li class="toctree-l3"><a class="reference internal" href="integrating.html">Integrating with GNOME</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../devel-docs.html">Developer Documentation Style Guidelines</a></li>
<li class="toctree-l2"><a class="reference external" href="https://developer.gnome.org/hig/">Human Interface Guidelines</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../tools.html">Tools</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of Tools</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tools/inspector.html">GTK Inspector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/valgrind.html">Valgrind</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/massif.html">Massif</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/sysprof.html">Sysprof</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../../_sources/guidelines/maintainer/parallel-installability.md.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="parallel-installability">
<h1>Parallel Installability<a class="headerlink" href="#parallel-installability" title="Permalink to this heading">¶</a></h1>
<p>All public libraries should be designed to be parallel installed to ease API
breaks later in the life of the library. If a library is used by multiple
projects, and wants to break API, either all of the projects must be ported to
the new API in parallel, or some of them will no longer be installable at the
same time as the others, due to depending on conflicting versions of this
library.</p>
<p>This is unmaintainable, and asking all the projects to port to a new API at the
same time is hard to organize and demoralizing, as most API breaks do not bring
large new features which would motivate porting.</p>
<p>The solution is to ensure that all libraries are parallel installable, allowing
the old and new versions of the API to be installed and compiled against at the
same time, without conflicts. Building in support for this kind of parallel
installation is much easier to do at the start of a project than it is to do
retroactively.</p>
<p>This eliminates the ‘chicken and egg’ problem of porting a collection of
applications from one version of a library to the next, and makes breaking API a
lot simpler for library maintainers, which can allow for more rapid iteration
and development of new features if they desire.</p>
<p>The alternative, and equally valid, solution is for the library to never break
API — the approach taken by libc.</p>
<section id="how-parallel-installability-works">
<h2>How parallel installability works<a class="headerlink" href="#how-parallel-installability-works" title="Permalink to this heading">¶</a></h2>
<p>The solution to the problem is essentially to rename the library, and in most
cases the nicest way to do so is to include the version number in the path of
every file it installs. This means multiple versions of the library can be
installed at the same time.</p>
<p>For example, say that library “Foo” traditionally installs these files:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/usr/include/foo.h</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/usr/include/foo-utils.h</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/usr/lib/libfoo.so</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/usr/lib/pkgconfig/foo.pc</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/usr/share/doc/foo/foo-manual.txt</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/usr/bin/foo-utility</span></code></p></li>
</ul>
<p>You might modify “Foo” version 4 to install these files instead:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/usr/include/foo-4/foo/foo.h</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/usr/include/foo-4/foo/utils.h</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/usr/lib/libfoo-4.so</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/usr/lib/pkgconfig/foo-4.pc</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/usr/share/doc/foo-4/foo-manual.txt</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/usr/bin/foo-utility-4</span></code></p></li>
</ul>
<p>“Foo” version 5 could then be installed alongside version 4 without breaking
existing projects:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/usr/include/foo-5/foo/foo.h</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/usr/include/foo-5/foo/utils.h</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/usr/lib/libfoo-5.so</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/usr/lib/pkgconfig/foo-5.pc</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/usr/share/doc/foo-5/foo-manual.txt</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/usr/bin/foo-utility-5</span></code></p></li>
</ul>
<p>This is easily supported using pkg-config: <code class="docutils literal notranslate"><span class="pre">foo-4.pc</span></code> would add
<code class="docutils literal notranslate"><span class="pre">/usr/include/foo-4</span></code> to the include path and <code class="docutils literal notranslate"><span class="pre">libfoo-4.so</span></code> to the list of
libraries to link; <code class="docutils literal notranslate"><span class="pre">foo-5.pc</span></code> would add <code class="docutils literal notranslate"><span class="pre">/usr/include/foo-5</span></code> and
<code class="docutils literal notranslate"><span class="pre">libfoo-5.so</span></code>.</p>
</section>
<section id="version-numbers">
<h2>Version numbers<a class="headerlink" href="#version-numbers" title="Permalink to this heading">¶</a></h2>
<p>The version number that goes in filenames is an ABI/API version. It should not
be the full version number of your package — just the part which signifies an
API break. If using the standard <code class="docutils literal notranslate"><span class="pre">major.minor.micro</span></code> scheme for project
versioning, the API version is typically the major version number.</p>
<p>Minor releases (typically where API is added but not changed or removed) and
micro releases (typically bug fixes) do not affect API backwards compatibility
so do not require moving all the files.</p>
</section>
<section id="c-header-files">
<h2>C header files<a class="headerlink" href="#c-header-files" title="Permalink to this heading">¶</a></h2>
<p>Header files should always be installed in a versioned subdirectory that
requires an <code class="docutils literal notranslate"><span class="pre">-I</span></code> flag to the C compiler. For example, if my header is
<code class="docutils literal notranslate"><span class="pre">foo.h</span></code>, and applications do this:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;foo/foo.h&gt;</span>
</pre></div>
</div>
<p>then I should install these files:</p>
<ul class="simple">
<li><p>Version 4: <code class="docutils literal notranslate"><span class="pre">/usr/include/foo-4/foo/foo.h</span></code></p></li>
<li><p>Version 5: <code class="docutils literal notranslate"><span class="pre">/usr/include/foo-5/foo/foo.h</span></code></p></li>
</ul>
<p>Applications should pass the flag <code class="docutils literal notranslate"><span class="pre">-I/usr/include/foo-4</span></code> or
<code class="docutils literal notranslate"><span class="pre">-I/usr/include/foo-5</span></code> to the C compiler depending on the version of “Foo”
they intend to use. Again, this is facilitated by using <code class="docutils literal notranslate"><span class="pre">pkg-config</span></code>.</p>
</section>
<section id="shared-libraries">
<h2>Shared libraries<a class="headerlink" href="#shared-libraries" title="Permalink to this heading">¶</a></h2>
<p>Library object files should have a versioned name. For example:</p>
<ul class="simple">
<li><p>Version 4: <code class="docutils literal notranslate"><span class="pre">/usr/lib/libfoo-4.so</span></code></p></li>
<li><p>Version 5: <code class="docutils literal notranslate"><span class="pre">/usr/lib/libfoo-5.so</span></code></p></li>
</ul>
<p>This allows applications to get exactly the one they want at compile time, and
ensures that versions 4 and 5 have no files in common.</p>
<section id="library-sonames">
<h3>Library sonames<a class="headerlink" href="#library-sonames" title="Permalink to this heading">¶</a></h3>
<p>Library sonames only address the problem of runtime linking previously-compiled
applications. They don’t address the issue of compiling applications that
require a previous version, and they don’t address anything other than
libraries.</p>
<p>For this reason, sonames should be used, but in addition to versioned names for
libraries. The two solutions address different problems.</p>
</section>
</section>
<section id="pkg-config-files">
<h2><code class="docutils literal notranslate"><span class="pre">pkg-config</span></code> files<a class="headerlink" href="#pkg-config-files" title="Permalink to this heading">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">pkg-config</span></code> files should have a versioned name. For example:</p>
<ul class="simple">
<li><p>Version 4: <code class="docutils literal notranslate"><span class="pre">/usr/lib/pkgconfig/foo-4.pc</span></code></p></li>
<li><p>Version 5: <code class="docutils literal notranslate"><span class="pre">/usr/lib/pkgconfig/foo-5.pc</span></code></p></li>
</ul>
<p>Since each <code class="docutils literal notranslate"><span class="pre">pkg-config</span></code> file contains versioned information about the library
name and include paths, any project which depends on the library should be able
to switch from one version to another simply by changing their <code class="docutils literal notranslate"><span class="pre">pkg-config</span></code>
check from <code class="docutils literal notranslate"><span class="pre">foo-4</span></code> to <code class="docutils literal notranslate"><span class="pre">foo-5</span></code> (and doing any necessary API porting).</p>
</section>
<section id="configuration-files">
<h2>Configuration files<a class="headerlink" href="#configuration-files" title="Permalink to this heading">¶</a></h2>
<p>From a user standpoint, the best approach to configuration files is to keep the
format both forward and backward compatible (both library versions understand
exactly the same configuration file syntax and semantics). Then the same
configuration file can be used for all versions of the library, and no
versioning is needed on the configuration file itself.</p>
<p>If you can’t do that, the configuration files should simply be renamed, and
users will have to configure each version of the library separately.</p>
</section>
<section id="translations">
<h2>Translations<a class="headerlink" href="#translations" title="Permalink to this heading">¶</a></h2>
<p>If you use gettext for translations, the message catalogs are installed under
<code class="docutils literal notranslate"><span class="pre">/usr/share/locale/lang/LC_MESSAGES/package</span></code>, where <code class="docutils literal notranslate"><span class="pre">package</span></code> is a unique
identifier for your project. When changing the version, you will need to change
<code class="docutils literal notranslate"><span class="pre">package</span></code>.</p>
<p>Typically, the package name is mapped to the <code class="docutils literal notranslate"><span class="pre">GETTEXT_PACKAGE</span></code> value and
defined in your build system. This value is also used in conjunction with the
localization API, such as <code class="docutils literal notranslate"><span class="pre">bindtextdomain()</span></code>, <code class="docutils literal notranslate"><span class="pre">textdomain()</span></code>, and
<code class="docutils literal notranslate"><span class="pre">dgettext()</span></code>.</p>
</section>
<section id="d-bus-interfaces">
<h2>D-Bus interfaces<a class="headerlink" href="#d-bus-interfaces" title="Permalink to this heading">¶</a></h2>
<p>A D-Bus interface is another form of API, similar to a C API except that
resolution of the version is done at runtime rather than compile time.
Versioning D-Bus interfaces is otherwise no different to C APIs: version
numbers must be included in interface names, service names and object paths.</p>
<p>For example, for a service <code class="docutils literal notranslate"><span class="pre">org.example.Foo</span></code> exposing interfaces A and B on
objects Controller and Client, versions 4 and 5 of the D-Bus API would look like
this:</p>
<section id="service-names">
<h3>Service names<a class="headerlink" href="#service-names" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Version 4: <code class="docutils literal notranslate"><span class="pre">com.example.Foo4</span></code></p></li>
<li><p>Version 5: <code class="docutils literal notranslate"><span class="pre">com.example.Foo5</span></code></p></li>
</ul>
</section>
<section id="interface-names">
<h3>Interface names<a class="headerlink" href="#interface-names" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Version 4:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">com.example.Foo4.InterfaceA</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">com.example.Foo4.InterfaceB</span></code></p></li>
</ul>
</li>
<li><p>Version 5:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">com.example.Foo5.InterfaceA</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">com.example.Foo5.InterfaceB</span></code></p></li>
</ul>
</li>
</ul>
</section>
<section id="object-paths">
<h3>Object paths<a class="headerlink" href="#object-paths" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Version 4:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">/com/example/Foo4/Controller</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/com/example/Foo4/Client</span></code></p></li>
</ul>
</li>
<li><p>Version 5:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">/com/example/Foo5/Controller</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/com/example/Foo5/Client</span></code></p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="programs-daemons-and-utilities">
<h2>Programs, daemons, and utilities<a class="headerlink" href="#programs-daemons-and-utilities" title="Permalink to this heading">¶</a></h2>
<p>Desktop applications generally do not need to be versioned, as they are not
depended on by any other modules. Daemons and utility programs, however,
interact with other parts of the system and hence need versioning.</p>
<p>Given a daemon and utility program:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/usr/libexec/foo-daemon</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/usr/bin/foo-lookup-utility</span></code></p></li>
</ul>
<p>these should be versioned as:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/usr/libexec/foo-daemon-4</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/usr/bin/foo-lookup-utility-4</span></code></p></li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You may want to install a symbolic link from <code class="docutils literal notranslate"><span class="pre">/usr/bin/foo-lookup-utility</span></code>
to the recommended versioned copy of the utility, to make it more convenient
for users to use.</p>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="integrating.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Integrating with GNOME</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="api-stability.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">API Stability</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, GNUstep contributors
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Parallel Installability</a><ul>
<li><a class="reference internal" href="#how-parallel-installability-works">How parallel installability works</a></li>
<li><a class="reference internal" href="#version-numbers">Version numbers</a></li>
<li><a class="reference internal" href="#c-header-files">C header files</a></li>
<li><a class="reference internal" href="#shared-libraries">Shared libraries</a><ul>
<li><a class="reference internal" href="#library-sonames">Library sonames</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pkg-config-files"><code class="docutils literal notranslate"><span class="pre">pkg-config</span></code> files</a></li>
<li><a class="reference internal" href="#configuration-files">Configuration files</a></li>
<li><a class="reference internal" href="#translations">Translations</a></li>
<li><a class="reference internal" href="#d-bus-interfaces">D-Bus interfaces</a><ul>
<li><a class="reference internal" href="#service-names">Service names</a></li>
<li><a class="reference internal" href="#interface-names">Interface names</a></li>
<li><a class="reference internal" href="#object-paths">Object paths</a></li>
</ul>
</li>
<li><a class="reference internal" href="#programs-daemons-and-utilities">Programs, daemons, and utilities</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=359c27e9"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../../_static/scripts/furo.js?v=4e2eecee"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/design-tabs.js?v=36754332"></script>
    </body>
</html>